name: 项目管理数据库
description: 管理各类项目的进度、状态和相关信息
filters:
  and:
    - file.hasTag("项目")
    - file.name != ""
formulas:
  完成状态: if(进度 == 100, "✅ 已完成", if(截止日期 < today(), "⚠️ 已逾期", if(状态 == "进行中", "🔄 进行中", "⏳ 待开始")))
  剩余天数: (截止日期 - today()).toFixed(0)
  进度条: '"■".repeat(Math.floor(进度/10)) + "□".repeat(10-Math.floor(进度/10)) + " " + 进度 + "%"'
  是否逾期: 截止日期 < today() and 状态 != "已完成"
  预算使用率: (实际花费 / 预算 * 100).toFixed(1) + "%"
properties:
  优先级:
    type: select
    options:
      - 高
      - 中
      - 低
    displayName: 优先级
  状态:
    type: select
    options:
      - 规划中
      - 进行中
      - 已完成
      - 已暂停
      - 已取消
    displayName: 状态
  进度:
    type: number
    min: 0
    max: 100
    displayName: 进度 (%)
  开始日期:
    type: date
    displayName: 开始日期
  截止日期:
    type: date
    displayName: 截止日期
  负责人:
    displayName: 负责人
  分类:
    type: select
    options:
      - 工作
      - 学习
      - 个人
      - 创作
    displayName: 项目分类
  预算:
    type: number
    displayName: 预算
  实际花费:
    type: number
    displayName: 实际花费
views:
  - type: table
    name: 项目总览
    filters:
      and:
        - 状态 != "已取消"
    order:
      - 优先级
      - 截止日期
    sort: []
    columns:
      - file.name
      - 优先级
      - 状态
      - 进度
      - 进度条
      - 截止日期
      - 剩余天数
      - 完成状态
      - 负责人
  - type: kanban
    name: 项目看板
    filters:
      and:
        - 状态 != "已完成"
        - 状态 != "已取消"
    groupBy: 状态
    order:
      - 优先级
      - 截止日期
    sort: []
  - type: calendar
    name: 项目日历
    filters:
      and:
        - 状态 != "已完成"
        - 状态 != "已取消"
    dateProperty: 截止日期
  - type: table
    name: 财务管理
    filters:
      and:
        - 预算 > 0
    order:
      - 实际花费
      - 预算
    sort: []
    columns:
      - file.name
      - 预算
      - 实际花费
      - 预算使用率
      - 状态
      - 负责人
